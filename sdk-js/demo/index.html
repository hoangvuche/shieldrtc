<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ShieldRTC SDK Demo</title>
    <style>
      body { font-family: system-ui, Arial, sans-serif; margin: 24px; }
      button { padding: 8px 12px; }
      pre { background: #f6f8fa; padding: 12px; border-radius: 8px; }
    </style>
  </head>
  <body>
    <h1>ShieldRTC – Demo</h1>
    <button id="join">Join demo</button>
    <pre id="log"></pre>
    <script>
      const logEl = document.getElementById('log');
      const log = (...a) => { logEl.textContent += a.join(' ') + "\n"; };

      document.getElementById('join').onclick = async () => {
        log('Pretend login → get signal_jwt from Portal (not implemented in scaffold).');
        // TODO: call /api/login to get signal_jwt
        const signalToken = 'PLACEHOLDER.JWT';

        const ws = new WebSocket(location.origin.replace(/^http/, 'ws') + '/signal');
        ws.onopen = () => {
          log('WS open, AUTH...');
          ws.send(JSON.stringify({ type: 'AUTH', token: signalToken }));
        };
        ws.onmessage = (e) => log('WS ←', e.data);
        ws.onerror = (e) => log('WS error', e.message || '');
      };
    </script>
  </body>
</html>
